{"ast":null,"code":"var _jsxFileName = \"/Users/phonxaychampasouk/Desktop/Github/PhonxayChampasouk.com/pages/about.js\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport { assign, Machine } from \"xstate\";\nimport { useMachine } from \"@xstate/react\";\nimport CountrySelector from \"../src/components/CountrySelector\";\nimport Stat from \"../src/components/stat\";\nimport CountrySearch from \"../src/components/CountrySearch\";\nconst statsApi = \"https://coronavirus-19-api.herokuapp.com/countries\"; //when page is loaded the machine will fetch the initial stats first.\n\nconst statsMachine = Machine({\n  id: 'statsMachine',\n  //when the page loads the state will fetchStats\n  initial: 'fetchStats',\n  //when the promise resolves successfully, xstate will assign the context to stats prop\n  context: {\n    stats: null\n  },\n  states: {\n    fetchStats: {\n      invoke: {\n        //running async function that returns a promise\n        src: () => new Promise(async (resolve, reject) => {\n          try {\n            const stats = await fetch(statsApi).then(response => response.json());\n            return resolve(stats);\n          } catch (error) {\n            console.log(\"error in fetching stats: \", error);\n            return reject(error);\n          }\n        }),\n        //target is the next state to move too, in this case it is the state ready\n        onDone: {\n          target: 'ready',\n          actions: 'assignStats'\n        },\n        onError: 'error'\n      }\n    },\n    ready: {},\n    error: {}\n  }\n}, {\n  actions: {\n    assignStats: assign((_context, event) => ({\n      stats: event.data\n    }))\n  }\n});\n\nconst IndexPage = () => {\n  const [current, send] = useMachine(statsMachine);\n  return __jsx(React.Fragment, null, __jsx(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 8\n    }\n  }, \"CoronaVirus Information\"), current.matches(\"fetchStats\") && __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 41\n    }\n  }, \"Loading Stats\\u2026\"), current.matches(\"error\") && __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 36\n    }\n  }, \"Error fetching stats\\u2026\"), current.matches(\"ready\") && __jsx(React.Fragment, null, __jsx(CountrySelector, {\n    stats: current.context.stats,\n    handleChange: country => send(\"COUNTRY_SELECTED\", {\n      country\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 11\n    }\n  }), __jsx(CountrySearch, {\n    handleChange: country => send(\"COUNTRY_SELECTED\", {\n      country\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 11\n    }\n  })), current.context.countriesSelected.length > 0 && __jsx(Stat, {\n    stats: current.context.countriesSelected,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }));\n};\n\nexport default IndexPage;","map":{"version":3,"sources":["/Users/phonxaychampasouk/Desktop/Github/PhonxayChampasouk.com/pages/about.js"],"names":["React","assign","Machine","useMachine","CountrySelector","Stat","CountrySearch","statsApi","statsMachine","id","initial","context","stats","states","fetchStats","invoke","src","Promise","resolve","reject","fetch","then","response","json","error","console","log","onDone","target","actions","onError","ready","assignStats","_context","event","data","IndexPage","current","send","matches","country","countriesSelected","length"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport { assign, Machine } from \"xstate\"\nimport { useMachine } from \"@xstate/react\"\nimport CountrySelector from \"../src/components/CountrySelector\"\nimport Stat from \"../src/components/stat\"\nimport CountrySearch from \"../src/components/CountrySearch\"\n\nconst statsApi = \"https://coronavirus-19-api.herokuapp.com/countries\"\n\n//when page is loaded the machine will fetch the initial stats first.\nconst statsMachine = Machine({\n    id: 'statsMachine',\n    //when the page loads the state will fetchStats\n    initial: 'fetchStats',\n    //when the promise resolves successfully, xstate will assign the context to stats prop\n    context: {\n        stats: null\n    },\n    states: {\n        fetchStats: {\n            invoke: {\n                //running async function that returns a promise\n                src: () =>\n                new Promise(async (resolve, reject) => {\n                    try {\n                        const stats =await fetch(statsApi).then((response) => response.json()\n                        )\n                        return resolve(stats)\n                    }catch (error) {\n                        console.log(\"error in fetching stats: \", error)\n                        return reject(error)\n                    }\n                }),\n                //target is the next state to move too, in this case it is the state ready\n                onDone: { target: 'ready', actions: 'assignStats' },\n                onError: 'error',\n            }\n        },\n        ready: {},\n        error: {}\n    }\n}, {\n    actions: {\n        assignStats: assign((_context, event) => ({\n            stats: event.data\n        }))\n    }\n})\n const IndexPage = () => {\n     const [current, send] = useMachine(statsMachine)\n     return (\n        <>\n       <h3>CoronaVirus Information</h3> \n      {current.matches(\"fetchStats\") && <div>Loading Stats…</div>} \n      {current.matches(\"error\") && <div>Error fetching stats…</div>} \n      {current.matches(\"ready\") && (\n        <>\n           \n          <CountrySelector\n            stats={current.context.stats}\n            handleChange={(country) => send(\"COUNTRY_SELECTED\", { country })}\n          />\n           \n          <CountrySearch\n            handleChange={(country) => send(\"COUNTRY_SELECTED\", { country })}\n          />\n           \n        </>\n      )}\n       \n      {current.context.countriesSelected.length > 0 && (\n        <Stat stats={current.context.countriesSelected} />\n      )}\n       \n    </>\n  )\n}\nexport default IndexPage"]},"metadata":{},"sourceType":"module"}